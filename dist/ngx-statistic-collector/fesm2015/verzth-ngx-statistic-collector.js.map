{"version":3,"file":"verzth-ngx-statistic-collector.js.map","sources":["ng://@verzth/ngx-statistic-collector/lib/ngx-statistic-collector.config.ts","ng://@verzth/ngx-statistic-collector/lib/ngx-statistic-collector.service.ts","ng://@verzth/ngx-statistic-collector/interceptors/AuthorizationInterceptor.ts","ng://@verzth/ngx-statistic-collector/lib/ngx-statistic-collector.module.ts"],"sourcesContent":["import {Injectable} from '@angular/core';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class NgxStatisticCollectorConfig {\n  private host: string;\n  private key: string;\n  constructor(){}\n  setHost(host: string){\n    this.host = host;\n    return this;\n  }\n  getHost(){\n    return this.host;\n  }\n  setKey(key: string){\n    this.key = key;\n    return this;\n  }\n  getKey(){\n    return this.key;\n  }\n}\n\nexport const TIME = {\n  HOURLY: 'hourly',\n  DAILY: 'daily',\n  WEEKLY: 'weekly',\n  MONTHLY: 'monthly',\n};\n","import { Injectable } from '@angular/core';\nimport {HttpClient} from '@angular/common/http';\nimport {Observable} from 'rxjs';\nimport {GeneralResponse} from '../interfaces/GeneralResponse';\nimport EventParams from '../interfaces/EventParams';\nimport ContentParams from '../interfaces/ContentParams';\nimport HitParams from '../interfaces/HitParams';\nimport {NgxStatisticCollectorConfig} from './ngx-statistic-collector.config';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class NgxStatisticCollectorService {\n\n  constructor(private http: HttpClient, private config: NgxStatisticCollectorConfig) {\n\n  }\n\n  getHits(time: string, params: HitParams): Observable<GeneralResponse<any>> {\n    return this.http.post<any>(\n      this.config.getHost() + 'hit/' + time,\n      params\n    );\n  }\n\n  getContents(time: string, params: ContentParams): Observable<GeneralResponse<any>> {\n    return this.http.post<any>(\n      this.config.getHost() + 'content/' + time,\n      params\n    );\n  }\n\n  getEvents(time: string, params: EventParams): Observable<GeneralResponse<any>> {\n    return this.http.post<any>(\n      this.config.getHost() + 'event/' + time,\n      params\n    );\n  }\n}\n","import {Injectable} from '@angular/core';\nimport {HttpHandler, HttpInterceptor, HttpRequest} from '@angular/common/http';\nimport {NgxStatisticCollectorConfig} from '../lib/ngx-statistic-collector.config';\n\n@Injectable()\nexport class AuthorizationInterceptor implements HttpInterceptor{\n  constructor(private config: NgxStatisticCollectorConfig){}\n  intercept(req: HttpRequest<any>, next: HttpHandler) {\n    const secureReq = req.clone( {\n      headers: req.headers\n        .set('Authorization', 'Basic ' + btoa(this.config.getKey() + ':')),\n      body: req.body\n    });\n    return next.handle(secureReq);\n  }\n}\n","import { NgModule } from '@angular/core';\nimport {NgxStatisticCollectorService} from './ngx-statistic-collector.service';\nimport {HTTP_INTERCEPTORS} from '@angular/common/http';\nimport {AuthorizationInterceptor} from '../interceptors/AuthorizationInterceptor';\nimport {NgxStatisticCollectorConfig} from './ngx-statistic-collector.config';\n\n\n\n@NgModule({\n  declarations: [],\n  imports: [],\n  exports: [],\n  providers: [\n    {provide: HTTP_INTERCEPTORS, useClass: AuthorizationInterceptor, multi: true},\n    {provide: NgxStatisticCollectorService, useClass: NgxStatisticCollectorService},\n    {provide: NgxStatisticCollectorConfig, useClass: NgxStatisticCollectorConfig},\n  ]\n})\nexport class NgxStatisticCollectorModule { }\n"],"names":[],"mappings":";;;;;;;;AAAA,MAKa,2BAA2B;IAGtC,iBAAe;;;;;;;IACf,OAAO,CAAC,IAAY;QAClB,mBAAA,IAAI,GAAC,IAAI,GAAG,IAAI,CAAC;QACjB,0BAAO,IAAI,GAAC;KACb;;;;IACD,OAAO;QACL,OAAO,IAAI,CAAC,IAAI,CAAC;KAClB;;;;;;;IACD,MAAM,CAAC,GAAW;QAChB,mBAAA,IAAI,GAAC,GAAG,GAAG,GAAG,CAAC;QACf,0BAAO,IAAI,GAAC;KACb;;;;IACD,MAAM;QACJ,OAAO,IAAI,CAAC,GAAG,CAAC;KACjB;;;YApBF,UAAU,SAAC;gBACV,UAAU,EAAE,MAAM;aACnB;;;;;;AAqBD,MAAa,IAAI,GAAG;IAClB,MAAM,EAAE,QAAQ;IAChB,KAAK,EAAE,OAAO;IACd,MAAM,EAAE,QAAQ;IAChB,OAAO,EAAE,SAAS;CACnB;;;;;;;AC9BD,MAYa,4BAA4B;;;;;IAEvC,YAAoB,IAAgB,EAAU,MAAmC;QAA7D,SAAI,GAAJ,IAAI,CAAY;QAAU,WAAM,GAAN,MAAM,CAA6B;KAEhF;;;;;;IAED,OAAO,CAAC,IAAY,EAAE,MAAiB;QACrC,OAAO,IAAI,CAAC,IAAI,CAAC,IAAI,CACnB,IAAI,CAAC,MAAM,CAAC,OAAO,EAAE,GAAG,MAAM,GAAG,IAAI,EACrC,MAAM,CACP,CAAC;KACH;;;;;;IAED,WAAW,CAAC,IAAY,EAAE,MAAqB;QAC7C,OAAO,IAAI,CAAC,IAAI,CAAC,IAAI,CACnB,IAAI,CAAC,MAAM,CAAC,OAAO,EAAE,GAAG,UAAU,GAAG,IAAI,EACzC,MAAM,CACP,CAAC;KACH;;;;;;IAED,SAAS,CAAC,IAAY,EAAE,MAAmB;QACzC,OAAO,IAAI,CAAC,IAAI,CAAC,IAAI,CACnB,IAAI,CAAC,MAAM,CAAC,OAAO,EAAE,GAAG,QAAQ,GAAG,IAAI,EACvC,MAAM,CACP,CAAC;KACH;;;YA5BF,UAAU,SAAC;gBACV,UAAU,EAAE,MAAM;aACnB;;;;YAVO,UAAU;YAMV,2BAA2B;;;;;;;;;ACPnC,MAKa,wBAAwB;;;;IACnC,YAAoB,MAAmC;QAAnC,WAAM,GAAN,MAAM,CAA6B;KAAG;;;;;;IAC1D,SAAS,CAAC,GAAqB,EAAE,IAAiB;;cAC1C,SAAS,GAAG,GAAG,CAAC,KAAK,CAAE;YAC3B,OAAO,EAAE,GAAG,CAAC,OAAO;iBACjB,GAAG,CAAC,eAAe,EAAE,QAAQ,GAAG,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,MAAM,EAAE,GAAG,GAAG,CAAC,CAAC;YACpE,IAAI,EAAE,GAAG,CAAC,IAAI;SACf,CAAC;QACF,OAAO,IAAI,CAAC,MAAM,CAAC,SAAS,CAAC,CAAC;KAC/B;;;YAVF,UAAU;;;;YAFH,2BAA2B;;;;;;;;ACFnC,MAkBa,2BAA2B;;;YAVvC,QAAQ,SAAC;gBACR,YAAY,EAAE,EAAE;gBAChB,OAAO,EAAE,EAAE;gBACX,OAAO,EAAE,EAAE;gBACX,SAAS,EAAE;oBACT,EAAC,OAAO,EAAE,iBAAiB,EAAE,QAAQ,EAAE,wBAAwB,EAAE,KAAK,EAAE,IAAI,EAAC;oBAC7E,EAAC,OAAO,EAAE,4BAA4B,EAAE,QAAQ,EAAE,4BAA4B,EAAC;oBAC/E,EAAC,OAAO,EAAE,2BAA2B,EAAE,QAAQ,EAAE,2BAA2B,EAAC;iBAC9E;aACF;;;;;;;;;;;;;;;;;"}
